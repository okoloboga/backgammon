{"name":"Escrow","code":"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","abi":"{\"name\":\"Escrow\",\"types\":[{\"name\":\"DataSize\",\"header\":null,\"fields\":[{\"name\":\"cells\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"bits\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"refs\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"SignedBundle\",\"header\":null,\"fields\":[{\"name\":\"signature\",\"type\":{\"kind\":\"simple\",\"type\":\"fixed-bytes\",\"optional\":false,\"format\":64}},{\"name\":\"signedData\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"StateInit\",\"header\":null,\"fields\":[{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"Context\",\"header\":null,\"fields\":[{\"name\":\"bounceable\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"raw\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"SendParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"MessageParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}}]},{\"name\":\"DeployParameters\",\"header\":null,\"fields\":[{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"init\",\"type\":{\"kind\":\"simple\",\"type\":\"StateInit\",\"optional\":false}}]},{\"name\":\"StdAddress\",\"header\":null,\"fields\":[{\"name\":\"workchain\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":8}},{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}}]},{\"name\":\"VarAddress\",\"header\":null,\"fields\":[{\"name\":\"workchain\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":32}},{\"name\":\"address\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"BasechainAddress\",\"header\":null,\"fields\":[{\"name\":\"hash\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}}]},{\"name\":\"Deploy\",\"header\":2490013878,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"DeployOk\",\"header\":2952335191,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"FactoryDeploy\",\"header\":1829761339,\"fields\":[{\"name\":\"queryId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"cashback\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"Game\",\"header\":null,\"fields\":[{\"name\":\"id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"creator\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"joiner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"jettonMaster\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"state\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"createdAt\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"joinedAt\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":true,\"format\":257}},{\"name\":\"winner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":true}},{\"name\":\"claimed\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"joinTimeout\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}}]},{\"name\":\"JettonPayload\",\"header\":null,\"fields\":[{\"name\":\"action\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":8}},{\"name\":\"gameId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"CreateGameTon\",\"header\":1,\"fields\":[{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"joinTimeout\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}}]},{\"name\":\"JoinGameTon\",\"header\":2,\"fields\":[{\"name\":\"gameId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"CancelGame\",\"header\":3,\"fields\":[{\"name\":\"gameId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"ReportWinner\",\"header\":4,\"fields\":[{\"name\":\"gameId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"winner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"WithdrawUnclaimed\",\"header\":5,\"fields\":[]},{\"name\":\"OnJettonTransfer\",\"header\":16,\"fields\":[{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"payload\",\"type\":{\"kind\":\"simple\",\"type\":\"JettonPayload\",\"optional\":false}},{\"name\":\"jettonMaster\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"ClaimJetton\",\"header\":17,\"fields\":[{\"name\":\"gameId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"Escrow$Data\",\"header\":null,\"fields\":[{\"name\":\"nextGameId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"admin\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"feeWallet\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"minTon\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"games\",\"type\":{\"kind\":\"dict\",\"key\":\"uint\",\"keyFormat\":64,\"value\":\"Game\",\"valueFormat\":\"ref\"}}]}],\"receivers\":[{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CreateGameTon\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"JoinGameTon\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"CancelGame\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"ReportWinner\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"OnJettonTransfer\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"ClaimJetton\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"WithdrawUnclaimed\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"Deploy\"}}],\"getters\":[],\"errors\":{\"2\":{\"message\":\"Stack underflow\"},\"3\":{\"message\":\"Stack overflow\"},\"4\":{\"message\":\"Integer overflow\"},\"5\":{\"message\":\"Integer out of expected range\"},\"6\":{\"message\":\"Invalid opcode\"},\"7\":{\"message\":\"Type check error\"},\"8\":{\"message\":\"Cell overflow\"},\"9\":{\"message\":\"Cell underflow\"},\"10\":{\"message\":\"Dictionary error\"},\"11\":{\"message\":\"'Unknown' error\"},\"12\":{\"message\":\"Fatal error\"},\"13\":{\"message\":\"Out of gas error\"},\"14\":{\"message\":\"Virtualization error\"},\"32\":{\"message\":\"Action list is invalid\"},\"33\":{\"message\":\"Action list is too long\"},\"34\":{\"message\":\"Action is invalid or not supported\"},\"35\":{\"message\":\"Invalid source address in outbound message\"},\"36\":{\"message\":\"Invalid destination address in outbound message\"},\"37\":{\"message\":\"Not enough Toncoin\"},\"38\":{\"message\":\"Not enough extra currencies\"},\"39\":{\"message\":\"Outbound message does not fit into a cell after rewriting\"},\"40\":{\"message\":\"Cannot process a message\"},\"41\":{\"message\":\"Library reference is null\"},\"42\":{\"message\":\"Library change action error\"},\"43\":{\"message\":\"Exceeded maximum number of cells in the library or the maximum depth of the Merkle tree\"},\"50\":{\"message\":\"Account state size exceeded limits\"},\"128\":{\"message\":\"Null reference exception\"},\"129\":{\"message\":\"Invalid serialization prefix\"},\"130\":{\"message\":\"Invalid incoming message\"},\"131\":{\"message\":\"Constraints error\"},\"132\":{\"message\":\"Access denied\"},\"133\":{\"message\":\"Contract stopped\"},\"134\":{\"message\":\"Invalid argument\"},\"135\":{\"message\":\"Code of a contract was not found\"},\"136\":{\"message\":\"Invalid standard address\"},\"138\":{\"message\":\"Not a basechain address\"},\"5486\":{\"message\":\"join timeout not passed\"},\"5913\":{\"message\":\"amount below minimum\"},\"6423\":{\"message\":\"only winner can claim\"},\"10541\":{\"message\":\"winner must be player\"},\"18980\":{\"message\":\"only waiting games can be cancelled\"},\"19635\":{\"message\":\"attach declared amount\"},\"21885\":{\"message\":\"only admin\"},\"26028\":{\"message\":\"only admin can report\"},\"26218\":{\"message\":\"game not waiting\"},\"41490\":{\"message\":\"attach exact stake\"},\"44463\":{\"message\":\"already claimed\"},\"50049\":{\"message\":\"game not finished\"},\"50479\":{\"message\":\"game not found\"},\"52959\":{\"message\":\"not a jetton game\"},\"53249\":{\"message\":\"creator can't join own game\"},\"56165\":{\"message\":\"game not in progress\"},\"61763\":{\"message\":\"only creator can cancel\"}},\"interfaces\":[\"org.ton.introspection.v0\",\"org.ton.abi.ipfs.v0\",\"org.ton.deploy.lazy.v0\"]}","init":{"kind":"direct","args":[{"name":"adminAddr","type":{"kind":"simple","type":"address","optional":false}},{"name":"feeWalletAddr","type":{"kind":"simple","type":"address","optional":false}}],"prefix":{"bits":1,"value":0},"deployment":{"kind":"system-cell","system":null}},"sources":{"contracts/escrow.tact":"Ly8gY29udHJhY3RzL0VzY3Jvdy50YWN0CmltcG9ydCAiQHN0ZGxpYi9kZXBsb3kiOwoKc3RydWN0IEdhbWUgewogIGlkOiBJbnQgYXMgdWludDY0OwogIGNyZWF0b3I6IEFkZHJlc3M7CiAgam9pbmVyOiBBZGRyZXNzPzsKICBqZXR0b25NYXN0ZXI6IEFkZHJlc3M/OyAgICAvLyBudWxsID0+IFRPTiwgQWRkcmVzcyA9PiBKZXR0b24KICBhbW91bnQ6IEludCBhcyBjb2luczsKICBzdGF0ZTogSW50OyAgICAgICAvLyAwPVdhaXRpbmcsMT1JblByb2dyZXNzLDI9RmluaXNoZWQsMz1DYW5jZWxsZWQKICBjcmVhdGVkQXQ6IEludCBhcyB1aW50MzI7CiAgam9pbmVkQXQ6IEludD87CiAgd2lubmVyOiBBZGRyZXNzPzsKICBjbGFpbWVkOiBCb29sOyAgICAvLyDQtNC70Y8gSmV0dG9uCiAgam9pblRpbWVvdXQ6IEludCBhcyB1aW50MzI7ICAvLyB0aW1lb3V0INCyINGB0LXQutGD0L3QtNCw0YUg0LTQu9GPINC+0LbQuNC00LDQvdC40Y8g0LLRgtC+0YDQvtCz0L4g0LjQs9GA0L7QutCwCn0KCnN0cnVjdCBKZXR0b25QYXlsb2FkIHsKICBhY3Rpb246IEludCBhcyB1aW50ODsgICAvLyAwID0gY3JlYXRlLCAxID0gam9pbgogIGdhbWVJZDogSW50IGFzIHVpbnQ2NDsKfQoKbWVzc2FnZSgweDAxKSBDcmVhdGVHYW1lVG9uIHsKICBhbW91bnQ6IEludCBhcyBjb2luczsKICBqb2luVGltZW91dDogSW50IGFzIHVpbnQzMiA9IDM2MDA7Cn0KCm1lc3NhZ2UoMHgwMikgSm9pbkdhbWVUb24gewogIGdhbWVJZDogSW50IGFzIHVpbnQ2NDsKfQoKbWVzc2FnZSgweDAzKSBDYW5jZWxHYW1lIHsKICBnYW1lSWQ6IEludCBhcyB1aW50NjQ7Cn0KCm1lc3NhZ2UoMHgwNCkgUmVwb3J0V2lubmVyIHsKICBnYW1lSWQ6IEludCBhcyB1aW50NjQ7CiAgd2lubmVyOiBBZGRyZXNzOwp9CgptZXNzYWdlKDB4MDUpIFdpdGhkcmF3VW5jbGFpbWVkIHt9CgptZXNzYWdlKDB4MTApIE9uSmV0dG9uVHJhbnNmZXIgewogIHNlbmRlcjogQWRkcmVzczsKICBhbW91bnQ6IEludCBhcyBjb2luczsKICBwYXlsb2FkOiBKZXR0b25QYXlsb2FkOwogIGpldHRvbk1hc3RlcjogQWRkcmVzczsKfQoKbWVzc2FnZSgweDExKSBDbGFpbUpldHRvbiB7CiAgZ2FtZUlkOiBJbnQgYXMgdWludDY0Owp9Cgpjb25zdCBTVEFURV9XQUlUSU5HOiBJbnQgPSAwOwpjb25zdCBTVEFURV9JTlBST0dSRVNTOiBJbnQgPSAxOwpjb25zdCBTVEFURV9GSU5JU0hFRDogSW50ID0gMjsKY29uc3QgU1RBVEVfQ0FOQ0VMTEVEOiBJbnQgPSAzOwoKY29udHJhY3QgRXNjcm93IHdpdGggRGVwbG95YWJsZSB7CiAgbmV4dEdhbWVJZDogSW50IGFzIHVpbnQ2NDsKICBhZG1pbjogQWRkcmVzczsKICBmZWVXYWxsZXQ6IEFkZHJlc3M7CiAgbWluVG9uOiBJbnQgYXMgY29pbnM7CiAgZ2FtZXM6IG1hcDxJbnQgYXMgdWludDY0LCBHYW1lPjsKCiAgaW5pdChhZG1pbkFkZHI6IEFkZHJlc3MsIGZlZVdhbGxldEFkZHI6IEFkZHJlc3MpIHsKICAgIHNlbGYubmV4dEdhbWVJZCA9IDE7CiAgICBzZWxmLmFkbWluID0gYWRtaW5BZGRyOwogICAgc2VsZi5mZWVXYWxsZXQgPSBmZWVXYWxsZXRBZGRyOwogICAgc2VsZi5taW5Ub24gPSB0b24oIjEiKTsKICAgIHNlbGYuZ2FtZXMgPSBtYXA8SW50IGFzIHVpbnQ2NCwgR2FtZT4ge307CiAgfQoKICAvLyAtLS0gVE9OIGNyZWF0ZQogIHJlY2VpdmUobXNnOiBDcmVhdGVHYW1lVG9uKSB7CiAgICBsZXQgaW5jb21pbmcgPSBjb250ZXh0KCkudmFsdWU7CiAgICByZXF1aXJlKGluY29taW5nID49IG1zZy5hbW91bnQsICJhdHRhY2ggZGVjbGFyZWQgYW1vdW50Iik7CiAgICByZXF1aXJlKG1zZy5hbW91bnQgPj0gc2VsZi5taW5Ub24sICJhbW91bnQgYmVsb3cgbWluaW11bSIpOwoKICAgIGxldCBpZCA9IHNlbGYubmV4dEdhbWVJZDsKICAgIHNlbGYubmV4dEdhbWVJZCArPSAxOwoKICAgIGxldCBnYW1lID0gR2FtZXsKICAgICAgaWQ6IGlkLAogICAgICBjcmVhdG9yOiBzZW5kZXIoKSwKICAgICAgam9pbmVyOiBudWxsLAogICAgICBqZXR0b25NYXN0ZXI6IG51bGwsCiAgICAgIGFtb3VudDogbXNnLmFtb3VudCwKICAgICAgc3RhdGU6IFNUQVRFX1dBSVRJTkcsCiAgICAgIGNyZWF0ZWRBdDogbm93KCksCiAgICAgIGpvaW5lZEF0OiBudWxsLAogICAgICB3aW5uZXI6IG51bGwsCiAgICAgIGNsYWltZWQ6IGZhbHNlLAogICAgICBqb2luVGltZW91dDogbXNnLmpvaW5UaW1lb3V0CiAgICB9OwogICAgc2VsZi5nYW1lcy5zZXQoaWQsIGdhbWUpOwoKICAgIGxldCBleGNlc3MgPSBpbmNvbWluZyAtIG1zZy5hbW91bnQ7CiAgICBpZiAoZXhjZXNzID4gMCkgewogICAgICBtZXNzYWdlKE1lc3NhZ2VQYXJhbWV0ZXJzeyB0bzogc2VuZGVyKCksIHZhbHVlOiBleGNlc3MsIG1vZGU6IFNlbmRJZ25vcmVFcnJvcnMgfSk7CiAgICB9CiAgfQoKICAvLyAtLS0gVE9OIGpvaW4KICByZWNlaXZlKG1zZzogSm9pbkdhbWVUb24pIHsKICAgIGxldCBnT3B0ID0gc2VsZi5nYW1lcy5nZXQobXNnLmdhbWVJZCk7IHJlcXVpcmUoZ09wdCAhPSBudWxsLCAiZ2FtZSBub3QgZm91bmQiKTsKICAgIGxldCBnID0gZ09wdCEhOwogICAgcmVxdWlyZShnLnN0YXRlID09IFNUQVRFX1dBSVRJTkcsICJnYW1lIG5vdCB3YWl0aW5nIik7CiAgICByZXF1aXJlKGcuY3JlYXRvciAhPSBzZW5kZXIoKSwgImNyZWF0b3IgY2FuJ3Qgam9pbiBvd24gZ2FtZSIpOwoKICAgIGxldCBpbmNvbWluZyA9IGNvbnRleHQoKS52YWx1ZTsKICAgIHJlcXVpcmUoaW5jb21pbmcgPj0gZy5hbW91bnQsICJhdHRhY2ggZXhhY3Qgc3Rha2UiKTsKCiAgICBsZXQgbmV3RyA9IEdhbWV7CiAgICAgIGlkOiBnLmlkLAogICAgICBjcmVhdG9yOiBnLmNyZWF0b3IsCiAgICAgIGpvaW5lcjogc2VuZGVyKCksCiAgICAgIGpldHRvbk1hc3RlcjogZy5qZXR0b25NYXN0ZXIsCiAgICAgIGFtb3VudDogZy5hbW91bnQsCiAgICAgIHN0YXRlOiBTVEFURV9JTlBST0dSRVNTLAogICAgICBjcmVhdGVkQXQ6IGcuY3JlYXRlZEF0LAogICAgICBqb2luZWRBdDogbm93KCksCiAgICAgIHdpbm5lcjogbnVsbCwKICAgICAgY2xhaW1lZDogZmFsc2UsCiAgICAgIGpvaW5UaW1lb3V0OiBnLmpvaW5UaW1lb3V0CiAgICB9OwogICAgc2VsZi5nYW1lcy5zZXQobXNnLmdhbWVJZCwgbmV3Ryk7CgogICAgbGV0IGV4Y2VzcyA9IGluY29taW5nIC0gZy5hbW91bnQ7CiAgICBpZiAoZXhjZXNzID4gMCkgewogICAgICBtZXNzYWdlKE1lc3NhZ2VQYXJhbWV0ZXJzeyB0bzogc2VuZGVyKCksIHZhbHVlOiBleGNlc3MsIG1vZGU6IFNlbmRJZ25vcmVFcnJvcnMgfSk7CiAgICB9CiAgfQoKICAvLyAtLS0gQ2FuY2VsCiAgcmVjZWl2ZShtc2c6IENhbmNlbEdhbWUpIHsKICAgIGxldCBnT3B0ID0gc2VsZi5nYW1lcy5nZXQobXNnLmdhbWVJZCk7IHJlcXVpcmUoZ09wdCAhPSBudWxsLCAiZ2FtZSBub3QgZm91bmQiKTsKICAgIGxldCBnID0gZ09wdCEhOwogICAgcmVxdWlyZShzZW5kZXIoKSA9PSBnLmNyZWF0b3IsICJvbmx5IGNyZWF0b3IgY2FuIGNhbmNlbCIpOwogICAgcmVxdWlyZShnLnN0YXRlID09IFNUQVRFX1dBSVRJTkcsICJvbmx5IHdhaXRpbmcgZ2FtZXMgY2FuIGJlIGNhbmNlbGxlZCIpOwoKICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8INGB0L7RhdGA0LDQvdGR0L3QvdGL0Lkgam9pblRpbWVvdXQg0LjQtyDQuNCz0YDRiwogICAgcmVxdWlyZShub3coKSA+IGcuY3JlYXRlZEF0ICsgZy5qb2luVGltZW91dCwgImpvaW4gdGltZW91dCBub3QgcGFzc2VkIik7CgogICAgbGV0IGNhbmNlbGxlZCA9IEdhbWV7CiAgICAgICAgaWQ6IGcuaWQsCiAgICAgICAgY3JlYXRvcjogZy5jcmVhdG9yLAogICAgICAgIGpvaW5lcjogZy5qb2luZXIsCiAgICAgICAgamV0dG9uTWFzdGVyOiBnLmpldHRvbk1hc3RlciwKICAgICAgICBhbW91bnQ6IGcuYW1vdW50LAogICAgICAgIHN0YXRlOiBTVEFURV9DQU5DRUxMRUQsCiAgICAgICAgY3JlYXRlZEF0OiBnLmNyZWF0ZWRBdCwKICAgICAgICBqb2luZWRBdDogZy5qb2luZWRBdCwKICAgICAgICB3aW5uZXI6IGcud2lubmVyLAogICAgICAgIGNsYWltZWQ6IGcuY2xhaW1lZCwKICAgICAgICBqb2luVGltZW91dDogZy5qb2luVGltZW91dAogICAgfTsKICAgIHNlbGYuZ2FtZXMuc2V0KG1zZy5nYW1lSWQsIGNhbmNlbGxlZCk7CgogICAgLy8gcmVmdW5kIGNyZWF0b3IKICAgIGlmIChnLmpldHRvbk1hc3RlciA9PSBudWxsKSB7CiAgICAgIC8vIFRPTiDQuNCz0YDQsCAtINCy0L7Qt9Cy0YDQsNGJ0LDQtdC8IFRPTgogICAgICBtZXNzYWdlKE1lc3NhZ2VQYXJhbWV0ZXJzeyB0bzogZy5jcmVhdG9yLCB2YWx1ZTogZy5hbW91bnQsIG1vZGU6IFNlbmRJZ25vcmVFcnJvcnMgfSk7CiAgICB9IGVsc2UgewogICAgICAvLyBKZXR0b24g0LjQs9GA0LAgLSDQstC+0LfQstGA0LDRidCw0LXQvCDRgtC+0LrQtdC90Ysg0YfQtdGA0LXQtyB0cmFuc2ZlcgogICAgICBsZXQgamV0dG9uTWFzdGVyID0gZy5qZXR0b25NYXN0ZXIhITsKICAgICAgbWVzc2FnZShNZXNzYWdlUGFyYW1ldGVyc3sKICAgICAgICB0bzogamV0dG9uTWFzdGVyLAogICAgICAgIHZhbHVlOiB0b24oIjAuMDUiKSwKICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgYm9keTogYmVnaW5DZWxsKCkKICAgICAgICAgIC5zdG9yZVVpbnQoMHhmOGE3ZWE1LCAzMikgICAvLyBzZWxlY3RvciB0cmFuc2ZlcgogICAgICAgICAgLnN0b3JlQWRkcmVzcyhnLmNyZWF0b3IpCiAgICAgICAgICAuc3RvcmVDb2lucyhnLmFtb3VudCkKICAgICAgICAgIC5zdG9yZUNvaW5zKDApICAgICAgICAgICAgICAvLyBkZXBsb3lXYWxsZXRWYWx1ZQogICAgICAgICAgLnN0b3JlQWRkcmVzcyhnLmNyZWF0b3IpCiAgICAgICAgICAuc3RvcmVCaXQodHJ1ZSkgICAgICAgICAgICAgLy8gbm90aWZ5CiAgICAgICAgICAuc3RvcmVSZWYoYmVnaW5DZWxsKCkuZW5kQ2VsbCgpKSAvLyBwYXlsb2FkCiAgICAgICAgLmVuZENlbGwoKQogICAgICB9KTsKICAgIH0KICB9CgogIC8vIC0tLSBSZXBvcnQgd2lubmVyIChUT04gKyBKZXR0b24pCiAgcmVjZWl2ZShtc2c6IFJlcG9ydFdpbm5lcikgewogICAgcmVxdWlyZShzZW5kZXIoKSA9PSBzZWxmLmFkbWluLCAib25seSBhZG1pbiBjYW4gcmVwb3J0Iik7CiAgICBsZXQgZ09wdCA9IHNlbGYuZ2FtZXMuZ2V0KG1zZy5nYW1lSWQpOyByZXF1aXJlKGdPcHQgIT0gbnVsbCwgImdhbWUgbm90IGZvdW5kIik7CiAgICBsZXQgZyA9IGdPcHQhITsKICAgIHJlcXVpcmUoZy5zdGF0ZSA9PSBTVEFURV9JTlBST0dSRVNTLCAiZ2FtZSBub3QgaW4gcHJvZ3Jlc3MiKTsKICAgIHJlcXVpcmUobXNnLndpbm5lciA9PSBnLmNyZWF0b3IgfHwgbXNnLndpbm5lciA9PSBnLmpvaW5lciwgIndpbm5lciBtdXN0IGJlIHBsYXllciIpOwoKICAgIGxldCBmaW5pc2hlZCA9IEdhbWV7CiAgICAgIGlkOiBnLmlkLAogICAgICBjcmVhdG9yOiBnLmNyZWF0b3IsCiAgICAgIGpvaW5lcjogZy5qb2luZXIsCiAgICAgIGpldHRvbk1hc3RlcjogZy5qZXR0b25NYXN0ZXIsCiAgICAgIGFtb3VudDogZy5hbW91bnQsCiAgICAgIHN0YXRlOiBTVEFURV9GSU5JU0hFRCwKICAgICAgY3JlYXRlZEF0OiBnLmNyZWF0ZWRBdCwKICAgICAgam9pbmVkQXQ6IGcuam9pbmVkQXQsCiAgICAgIHdpbm5lcjogbXNnLndpbm5lciwKICAgICAgY2xhaW1lZDogZy5jbGFpbWVkLAogICAgICBqb2luVGltZW91dDogZy5qb2luVGltZW91dAogICAgfTsKCiAgICBzZWxmLmdhbWVzLnNldChtc2cuZ2FtZUlkLCBmaW5pc2hlZCk7CgogICAgaWYgKGcuamV0dG9uTWFzdGVyID09IG51bGwpIHsKICAgICAgbGV0IHRvdGFsID0gZy5hbW91bnQgKiAyOwogICAgICBsZXQgZmVlID0gKHRvdGFsICogNSkvMTAwOwogICAgICBsZXQgd2lubmVyQW1vdW50ID0gdG90YWwgLSBmZWU7CgogICAgICBtZXNzYWdlKE1lc3NhZ2VQYXJhbWV0ZXJzeyB0bzogbXNnLndpbm5lciwgdmFsdWU6IHdpbm5lckFtb3VudCwgbW9kZTogU2VuZElnbm9yZUVycm9ycyB9KTsKICAgICAgaWYgKGZlZSA+IDApIHsKICAgICAgICAgIG1lc3NhZ2UoTWVzc2FnZVBhcmFtZXRlcnN7CiAgICAgICAgICB0bzogc2VsZi5mZWVXYWxsZXQsCiAgICAgICAgICB2YWx1ZTogZmVlLAogICAgICAgICAgbW9kZTogU2VuZElnbm9yZUVycm9ycwogICAgICAgIH0pOwogICAgICB9ICAgCiAgICB9CiAgfQoKICAvLyAtLS0gSmV0dG9uIHRyYW5zZmVyCiAgcmVjZWl2ZShtc2c6IE9uSmV0dG9uVHJhbnNmZXIpIHsKCiAgICBpZiBtc2cucGF5bG9hZC5hY3Rpb24gPT0gMCB7CiAgICAgIGxldCBpZCA9IHNlbGYubmV4dEdhbWVJZDsKICAgICAgc2VsZi5uZXh0R2FtZUlkICs9IDE7CiAgICAgIGxldCBnYW1lID0gR2FtZXsKICAgICAgICBpZDogaWQsCiAgICAgICAgY3JlYXRvcjogbXNnLnNlbmRlciwKICAgICAgICBqb2luZXI6IG51bGwsCiAgICAgICAgamV0dG9uTWFzdGVyOiBtc2cuamV0dG9uTWFzdGVyLAogICAgICAgIGFtb3VudDogbXNnLmFtb3VudCwKICAgICAgICBzdGF0ZTogU1RBVEVfV0FJVElORywKICAgICAgICBjcmVhdGVkQXQ6IG5vdygpLAogICAgICAgIGpvaW5lZEF0OiBudWxsLAogICAgICAgIHdpbm5lcjogbnVsbCwKICAgICAgICBjbGFpbWVkOiBmYWxzZSwKICAgICAgICBqb2luVGltZW91dDogMzYwMCAgLy8gZGVmYXVsdCAxIGhvdXIgZm9yIEpldHRvbiBnYW1lcwogICAgICB9OwogICAgICBzZWxmLmdhbWVzLnNldChpZCwgZ2FtZSk7CiAgICB9IGVsc2UgewogICAgICBsZXQgZ09wdCA9IHNlbGYuZ2FtZXMuZ2V0KG1zZy5wYXlsb2FkLmdhbWVJZCk7IHJlcXVpcmUoZ09wdCAhPSBudWxsLCAiZ2FtZSBub3QgZm91bmQiKTsKICAgICAgbGV0IGcgPSBnT3B0ISE7CiAgICAgIHJlcXVpcmUoZy5zdGF0ZSA9PSBTVEFURV9XQUlUSU5HLCAiZ2FtZSBub3Qgd2FpdGluZyIpOwogICAgICBsZXQgbmV3RyA9IEdhbWV7CiAgICAgICAgaWQ6IGcuaWQsCiAgICAgICAgY3JlYXRvcjogZy5jcmVhdG9yLAogICAgICAgIGpvaW5lcjogbXNnLnNlbmRlciwKICAgICAgICBqZXR0b25NYXN0ZXI6IGcuamV0dG9uTWFzdGVyLAogICAgICAgIGFtb3VudDogZy5hbW91bnQsCiAgICAgICAgc3RhdGU6IFNUQVRFX0lOUFJPR1JFU1MsCiAgICAgICAgY3JlYXRlZEF0OiBnLmNyZWF0ZWRBdCwKICAgICAgICBqb2luZWRBdDogbm93KCksCiAgICAgICAgd2lubmVyOiBudWxsLAogICAgICAgIGNsYWltZWQ6IGZhbHNlLAogICAgICAgIGpvaW5UaW1lb3V0OiBnLmpvaW5UaW1lb3V0CiAgICAgIH07CgogICAgICBzZWxmLmdhbWVzLnNldChtc2cucGF5bG9hZC5nYW1lSWQsIG5ld0cpOwogICAgfQogIH0KCiAgcmVjZWl2ZShtc2c6IENsYWltSmV0dG9uKSB7CiAgICBsZXQgZ09wdCA9IHNlbGYuZ2FtZXMuZ2V0KG1zZy5nYW1lSWQpOyByZXF1aXJlKGdPcHQgIT0gbnVsbCwgImdhbWUgbm90IGZvdW5kIik7CiAgICBsZXQgZyA9IGdPcHQhITsKICAgIHJlcXVpcmUoZy5zdGF0ZSA9PSBTVEFURV9GSU5JU0hFRCwgImdhbWUgbm90IGZpbmlzaGVkIik7CiAgICByZXF1aXJlKGcuamV0dG9uTWFzdGVyICE9IG51bGwsICJub3QgYSBqZXR0b24gZ2FtZSIpOwogICAgcmVxdWlyZShzZW5kZXIoKSA9PSBnLndpbm5lciwgIm9ubHkgd2lubmVyIGNhbiBjbGFpbSIpOwogICAgcmVxdWlyZSghZy5jbGFpbWVkLCAiYWxyZWFkeSBjbGFpbWVkIik7CgogICAgLy8g0L/QvtC80LXRh9Cw0LXQvCDQutCw0Log0L/QvtC70YPRh9C10L3QvgogICAgZy5jbGFpbWVkID0gdHJ1ZTsKICAgIHNlbGYuZ2FtZXMuc2V0KG1zZy5nYW1lSWQsIGcpOwoKICAgIC8vIEpldHRvbiB0cmFuc2ZlcgogICAgbGV0IGpldHRvbk1hc3RlciA9IGcuamV0dG9uTWFzdGVyISE7CiAgICBsZXQgYW1vdW50OiBJbnQgPSBnLmFtb3VudCAqIDI7CgogICAgLy8gY2FsbCBqZXR0b24gdHJhbnNmZXIKICAgIG1lc3NhZ2UoTWVzc2FnZVBhcmFtZXRlcnN7CiAgICAgIHRvOiBqZXR0b25NYXN0ZXIsCiAgICAgIHZhbHVlOiB0b24oIjAuMDUiKSwKICAgICAgYm91bmNlOiB0cnVlLAogICAgICBib2R5OiBiZWdpbkNlbGwoKQogICAgICAgIC5zdG9yZVVpbnQoMHhmOGE3ZWE1LCAzMikgICAvLyBzZWxlY3RvciB0cmFuc2ZlcgogICAgICAgIC5zdG9yZUFkZHJlc3MoZy53aW5uZXIhISkKICAgICAgICAuc3RvcmVDb2lucyhhbW91bnQpCiAgICAgICAgLnN0b3JlQ29pbnMoMCkgICAgICAgICAgICAgIC8vIGRlcGxveVdhbGxldFZhbHVlCiAgICAgICAgLnN0b3JlQWRkcmVzcyhnLndpbm5lciEhKQogICAgICAgIC5zdG9yZUJpdCh0cnVlKSAgICAgICAgICAgICAvLyBub3RpZnkKICAgICAgICAuc3RvcmVSZWYoYmVnaW5DZWxsKCkuZW5kQ2VsbCgpKSAvLyBwYXlsb2FkCiAgICAgIC5lbmRDZWxsKCkKICAgIH0pOwogIH0KCiAgLy8gLS0tIFdpdGhkcmF3IGxlZnRvdmVyIFRPTgogIHJlY2VpdmUobXNnOiBXaXRoZHJhd1VuY2xhaW1lZCkgewogICAgcmVxdWlyZShzZW5kZXIoKSA9PSBzZWxmLmFkbWluLCAib25seSBhZG1pbiIpOwogICAgbGV0IGJhbCA9IG15QmFsYW5jZSgpIC0gY29udGV4dCgpLnZhbHVlOwogICAgbGV0IHJlc2VydmUgPSB0b24oIjAuMDEiKTsKICAgIGlmIChiYWwgPiByZXNlcnZlKSB7CiAgICAgIG1lc3NhZ2UoTWVzc2FnZVBhcmFtZXRlcnN7IAogICAgICAgIHRvOiBzZWxmLmZlZVdhbGxldCwgCiAgICAgICAgdmFsdWU6IGJhbCAtIHJlc2VydmUsIAogICAgICAgIG1vZGU6IFNlbmRJZ25vcmVFcnJvcnMgCiAgICAgIH0pOwogICAgfQogIH0KfQo="},"compiler":{"name":"tact","version":"1.6.13","parameters":"{\"entrypoint\":\"contracts/escrow.tact\",\"options\":{\"debug\":false,\"external\":false}}"}}